<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>微信菜单管理系统</title>
</head>
<body>
<span>生成一级菜单测试</span>
<form  method="post" id="LevOneMenu" onclick="return false;">
    <input type="hidden" name="menuNum" id="menuNum" value=""/>
    <div id="div">

    </div>
</form>
<input type="button" value="新增菜单" id="subButton"/>
<input type="button" value="删除菜单" id="deleteMenu"/>
<input type="button" value="查询菜单" id="quaryMenu"/>
</body>
<script th:src="@{/jquery.min.js}"></script>
<script th:inline="javascript">
    var i=1;
    $("#div").html("<span id=\"firstMenu1\">请输入菜单名字：<input type=\"text\" id=\"menuName1\" name=\"menuName1\"/><input type=\"button\" id=\"add1\" onclick=\"change(1)\" value=\"+\"/></span>");

    function change(obj) {
        if(obj==1){
            var menuName1=$('#menuName1').val();
            $("#div").html("");
            $("#div").html("<span id=\"firstMenu1\">请输入菜单名字：<input type=\"text\" id=\"menuName1\" name=\"menuName1\" value=\"\"/><input type=\"button\" id=\"jian1\" onclick=\"change(-1)\" value=\"-\"/></span>" +
                "</br><span id=\"firstMenu2\">请输入菜单名字：<input type=\"text\" id=\"menuName2\" name=\"menuName2\"/><input type=\"button\" id=\"add2\" onclick=\"change(2)\" value=\"+\"/></span>");
            i=2;
            $("#menuNum").val(2);
            $('#menuName1').val(menuName1);
        }else if(obj==2){
            var menuName1=$('#menuName1').val();
            var menuName2=$('#menuName2').val();
            $("#div").html("");
            $("#div").html("<span id=\"firstMenu1\">请输入菜单名字：<input type=\"text\" id=\"menuName1\" name=\"menuName1\"/><input type=\"button\" id=\"jian1\" onclick=\"change(-1)\" value=\"-\"/></span>" +
                "</br><span id=\"firstMenu2\">请输入菜单名字：<input type=\"text\" id=\"menuName2\" name=\"menuName2\"/><input type=\"button\" id=\"jian2\" onclick=\"change(-2)\" value=\"-\"/></span>" +
                "</br><span id=\"firstMenu3\">请输入菜单名字：<input type=\"text\" id=\"menuName3\" name=\"menuName3\"/><input type=\"button\" id=\"add3\" onclick=\"change(3)\" value=\"+\"/></span>");
            i=3;
            $("#menuNum").val(3);
            $('#menuName1').val(menuName1);
            $('#menuName2').val(menuName2);
        }else if(obj==-1){
            if(i==2){
                $("#div").html("");
                $("#div").html("<span id=\"firstMenu1\">请输入菜单名字：<input type=\"text\" id=\"menuName1\" name=\"menuName1\"/><input type=\"button\" id=\"add1\" onclick=\"change(1)\" value=\"+\"/></span>");
                i=1;
                $("#menuNum").val(1);
            }else if(i==3){
                $("#div").html("");
                $("#div").html("<span id=\"firstMenu1\">请输入菜单名字：<input type=\"text\" id=\"menuName1\" name=\"menuName1\"/><input type=\"button\" id=\"jian1\" onclick=\"change(-1)\" value=\"-\"/></span>" +
                    "</br><span id=\"firstMenu2\">请输入菜单名字：<input type=\"text\" id=\"menuName2\" name=\"menuName2\"/><input type=\"button\" id=\"add2\" onclick=\"change(2)\" value=\"+\"/></span>");
                i=2;
                $("#menuNum").val(2);
            }
        }else if(obj==-2){
            if(i==2){
                $("#div").html("");
                $("#div").html("<span id=\"firstMenu1\">请输入菜单名字：<input type=\"text\" id=\"menuName1\" name=\"menuName1\"/><input type=\"button\" id=\"add1\" onclick=\"change(1)\" value=\"+\"/></span>");
                i=1;
                $("#menuNum").val(1);
            }else if(i==3){
                $("#div").html("");
                $("#div").html("<span id=\"firstMenu1\">请输入菜单名字：<input type=\"text\" id=\"menuName1\" name=\"menuName1\"/><input type=\"button\" id=\"jian1\" onclick=\"change(-1)\" value=\"-\"/></span>" +
                    "</br><span id=\"firstMenu2\">请输入菜单名字：<input type=\"text\" id=\"menuName2\" name=\"menuName2\"/><input type=\"button\" id=\"add2\" onclick=\"change(2)\" value=\"+\"/></span>");
                i=2;
                $("#menuNum").val(2);
            }
        }else if(obj==3){
            alert("最多只能添加三个一级菜单！")
        }
    }

    $("#subButton").on("click",function () {
        if($("#menuName1").val()==""||$("#menuName1").val()==null){
            alert("请输入菜单名！");
        }else{
            $.post(/*[[@{/createMenue}]]*/,$("#LevOneMenu").serialize(),function(result) {
                if(result.code=="0"){
                    alert(result.msg);
                }else{
                    alert(result.msg);
                }
            });
        }
    });
    $("#deleteMenu").on("click",function () {
        $.post(/*[[@{/deleteMenu}]]*/,{},function(result) {
            if(result.code=="0"){
                alert(result.msg);
            }else{
                alert(result.msg);
            }
        });
    });
    $("#quaryMenu").on("click",function () {
        $.post(/*[[@{/quaryMenu}]]*/,{},function(result) {
            if(result.code=="0"){
                alert(result.msg);
            }else{
                alert(result.msg);
            }
        });
    });
</script>
</html>